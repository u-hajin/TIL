## 목차

- 2.1 [스파크의 기본 아키텍처](#21-스파크의-기본-아키텍처)
  - 2.1.1 [스파크 애플리케이션](#211-스파크-애플리케이션)
    - [Driver](#driver)
    - [Executor](#executor)
    - [스파크 애플리케이션 이해를 위한 핵심사항](#스파크-애플리케이션-이해를-위한-핵심사항)

## 2.1 스파크의 기본 아키텍처

컴퓨터 클러스터는 여러 컴퓨터의 자원을 모아 하나의 컴퓨터처럼 사용할 수 있게 만든다.  
하지만 컴퓨터 클러스터를 구성하는 것만으로는 부족하며 클러스터에서 작업을 조율할 수 있는 프레임워크인 스파크가 필요하다.

**스파크는 클러스터의 데이터 처리 작업을 관리하고 조율**한다.

스파크가 연산에 사용할 클러스터는

- 스파크 standalone
- 하둡 YARN
- Mesos

위와 같은 클러스터 매니저에서 관리한다.

### 작업 처리 과정

1. 클러스터 매니저에 스파크 애플리케이션 **submit**

2. 클러스터 매니저는 애플리케이션 실행에 필요한 **자원 할당**

3. 할당받은 자원으로 **작업 처리**

## 2.1.1 스파크 애플리케이션

스파크 애플리케이션 $\rightarrow$ dirver(드라이버) 프로세스 + 다수의 executor(익스큐터) 프로세스로 구성

### Driver

- 클러스터 노드 중 하나에서 실행됨

- main() 함수 실행

- 스파크 애플리케이션 정보 유지 관리

- 사용자 프로그램이나 입력에 대한 응답

- 전박적인 익스큐터 프로세스의 작업 관련 분석 및 배포

- 스케줄링

스파크 애플리케이션의 심장과 같은 존재로 애플리케이션의 수명 주기 동안 관련 정보를 모두 유지한다.

### Executor

- 드라이버 프로세스가 할당한 작업(코드) 실행

- 진행 상황을 드라이버 노드에 보고

아래 이미지는 클러스터 매니저가 물리적 머신을 관리하고 스파크 애플리케이션에 자원을 할당하는 방법을 나타낸다.

<img width="350" height="auto" src="https://github.com/usuyn/TIL/assets/68963707/4420468f-de96-4941-a2ea-51327438045a">

$\rightarrow$ 스파크 애플리케이션의 아키텍처

클러스터 매니저는

- 스파크 standalone
- 하둡 YARN
- Mesos

중 하나를 선택할 수 있다.

하나의 클러스터에서 여러개의 스파크 애플리케이션을 실행할 수 있다.

위 이미지에서 왼쪽에 드라이버 프로세스가 있고 오른쪽에 4개의 익스큐터가 있다. 사용자는 각 노드에 할당할 익스큐터 수를 지정할 수 있다. (이미지에는 클러스터 노드의 개념을 나타내지 않음.)

### 스파크 애플리케이션 이해를 위한 핵심사항

- 스파크는 사용 가능한 자원을 파악하기 위해 클러스터 매니저 사용

- 드라이버 프로세스는 주어진 작업 완료를 위해 드라이버 프로그램의 명령을 익스큐터에서 실행할 책임이 있다.

익스큐터는 대부분 스파크 코드를 실행하는 역할을 한다. 하지만 드라이버는 스파크의 언어 API를 통해 다양한 언어로 실행할 수 있다.
