## 목차

- 3.0 [스파크 기능 둘러보기](#30-스파크-기능-둘러보기)
- 3.1 [운영용 애플리케이션 실행하기(예제)](#31-운영용-애플리케이션-실행하기)
  - [pi 계산](#pi-계산)

## 3.0 스파크 기능 둘러보기

앞 장에서는 트랜스포메이션과 액션 등 스파크의 구조적 API와 관련된 핵심 개념을 소개했다.  
이런 단순한 개념적 구성 요소는 스파크 에코 시스템의 방대한 기능과 라이브러리의 바탕을 이룬다.

스파크는 기본 요소인 저수준 API와 구조적 API, 추가 기능을 제공하는 일련의 표준 라이브버리로 구성되어 있다.

<img width="400" alt="image" src="https://github.com/usuyn/TIL/assets/68963707/7c97e698-da68-4933-af64-e5dceec59153">

$\rightarrow$ 스파크의 기능

스파크의 라이브러리는 그래프 분석, 머신러닝, 스트리밍 등 다양한 작업을 지원하며 컴퓨팅 및 스토리지 시스템과의 통합을 돕는 역할을 한다.

이 장에서는 다음과 같은 내용을 설명한다.

- spark-submit 명령으로 운영용 애플리케이션 실행

- Dataset : 타입 안정성(type-safe)을 제공하는 구조적 API

- 구조적 스트리밍

- 머신러닝과 고급 분석

- RDD : 스파크의 저수준 API

- SparkR

- 서드파티 패키지 에코 시스템

## 3.1 운영용 애플리케이션 실행하기

스파크를 사용하면 빅데이터 프로그램을 쉽게 개발할 수 있다.

**spark-submit** 명령을 사용해 대화형 셸에서 개발한 프로그램을 운영용 애플리케이션으로 쉽게 전환할 수 있다.

**spark-submit**

$\rightarrow$ 애플리케이션 코드를 클러스터에 전송해 실행시키는 역할

$\rightarrow$ 클러스터에 제출된 애플리케이션은 작업이 종료되거나 에러가 발생할 때까지 실행

$\rightarrow$ 스파크 애플리케이션은 스탠드얼론, 메소스, YARN 클러스터 매니저를 이용해 실행

$\rightarrow$ 애플리케이션 실행에 필요한 자원과 실행 방식, 다양한 옵션 지정 가능

### pi 계산

**로컬 머신에서 애플리케이션을 실행**한다. 스파크와 함께 제공되는 스칼라 애플리케이션 예제를 실행한다. 스파크 디렉토리에서 아래 명령어를 입력한다.

```scala
./bin/spark-submit \
  --class org.apache.spark.examples.SparkPi \
  --master local \
  ./examples/jars/spark-examples_2.12-3.5.0.jar 10 // 버전에 따라 다름
```

$\rightarrow$ 스칼라 코드

```bash
./bin/spark-submit \
  --master local \
  ./examples/src/main/python/pi.py 10
```

$\rightarrow$ 파이썬 코드

위 예제는 pi 값을 특정 자릿수까지 계산한다.

spark-submit 명령에 예제 클래스를 지정하고 로컬 머신에서 실행되도록 설정했으며, 실행에 필요한 JAR 파일과 관련 인수도 함께 지정했다.

master 옵션의 인숫값을 변경하면 스파크가 지원하는 스파크 스탠드얼론, 메소스, YARN 클러스터 매니저에서 동일한 애플리케이션을 실행할 수 있다.
